CREATE TABLE BOARD(
	BOARDNUM INT PRIMARY KEY,
	ID VARCHAR(100),
	CATEGORY VARCHAR(100) NOT NULL,
	TITLE VARCHAR(100) NOT NULL,
	CONTENTS VARCHAR(500) NOT NULL,
	BOARDDATE DATE DEFAULT SYSDATE,
	PRICE INT,
	IMAGE VARCHAR(300),
	PRODUCTNAME VARCHAR(100),
	PRODUCTCATEGORY VARCHAR(100),
	COMPANY VARCHAR(100),
	STATE VARCHAR(100),
	VIEWCOUNT INT
);


SELECT * FROM (
    SELECT FILTER_DATA.*, COALESCE(RECOMMEND_COUNT.RECOMMENDCNT, 0) AS RECOMMENDCNT FROM (
        SELECT *
        FROM BOARD
        WHERE 1=1 ORDER BY BOARDNUM ASC
    )FILTER_DATA
    LEFT JOIN (
    SELECT BOARDNUM, COUNT(BOARDNUM) AS RECOMMENDCNT
    FROM RECOMMEND
    GROUP BY BOARDNUM
)RECOMMEND_COUNT
ON FILTER_DATA.BOARDNUM = RECOMMEND_COUNT.BOARDNUM 
)SORT_DATA LEFT JOIN MEMBER ON MEMBER.ID = SORT_DATA.ID;

SELECT * FROM (
    SELECT * FROM (
        SELECT *
        FROM BOARD
        WHERE 1=1 
    ) 
);
LEFT JOIN RECOMMEND ON B.ID = RECOMMEND.ID
GROUP BY B.BOARDNUM, B.TITLE, B.PRICE, B.PRODUCTCATEGORY, B.COMPANY, B.STATE, B.VIEWCOUNT, ; 

DELETE FROM RECOMMEND;


SELECT BOARDNUM, COUNT(BOARDNUM) RECOMMENDCNT
FROM RECOMMEND 
GROUP BY BOARDNUM;
													--(pk,  추천한게시글,  추천한유저)
INSERT INTO RECOMMEND(RECOMMENDNUM, BOARDNUM,ID) VALUES (1, 1, 'a@a.c');
INSERT INTO RECOMMEND(RECOMMENDNUM, BOARDNUM,ID) VALUES (2, 2, 'a@a.c');
INSERT INTO RECOMMEND(RECOMMENDNUM, BOARDNUM,ID) VALUES (3, 5, 'a@a.c');
INSERT INTO RECOMMEND(RECOMMENDNUM, BOARDNUM,ID) VALUES (4, 8, 'a@a.c');
INSERT INTO RECOMMEND(RECOMMENDNUM, BOARDNUM,ID) VALUES (5, 7, 'a@a.c');
INSERT INTO RECOMMEND(RECOMMENDNUM, BOARDNUM,ID) VALUES (6, 1, 'b@b.c');
INSERT INTO RECOMMEND(RECOMMENDNUM, BOARDNUM,ID) VALUES (7, 2, 'b@b.c');
INSERT INTO RECOMMEND(RECOMMENDNUM, BOARDNUM,ID) VALUES (8, 3, 'b@b.c');
 
CREATE TABLE RECOMMEND(
	RECOMMENDNUM INT PRIMARY KEY,
	BOARDNUM INT,
	ID VARCHAR(100),
	FOREIGN KEY (BOARDNUM) REFERENCES BOARD(BOARDNUM) ON DELETE CASCADE
); 



SELECT * FROM (SELECT B.*, ROWNUM FROM ( SELECT A.* FROM ( SELECT * FROM BOARD WHERE 1=1 )A)B);
SELECT BOARD.BOARDNUM, MEMBER.ID, BOARD.CATEGORY, BOARD.TITLE, 
			TO_CHAR(BOARD.BOARDDATE, 'YYYY-MM-DD') AS BOARDDATE, BOARD.STATE, BOARD.PRICE, BOARD.VIEWCOUNT, RECOMMEND.RECOMMENDNUM, MEMBER.NICKNAME, MEMBER.ID, 
			COUNT(BOARD.BOARDNUM) AS CNT FROM BOARD 
			LEFT JOIN MEMBER ON BOARD.ID = MEMBER.ID 
			LEFT JOIN RECOMMEND ON BOARD.BOARDNUM = RECOMMEND.BOARDNUM WHERE CATEGORY = '리뷰'
			GROUP BY BOARD.BOARDNUM, BOARD.PRICE, MEMBER.ID, BOARD.CATEGORY, BOARD.TITLE, BOARD.BOARDDATE, 
			BOARD.STATE, BOARD.VIEWCOUNT, RECOMMEND.RECOMMENDNUM, MEMBER.NICKNAME, MEMBER.ID 
			ORDER BY BOARD.BOARDNUM DESC;
SELECT * FROM BOARD;
SELECT * FROM MEMBER;
SELECT * FROM RECOMMEND;
DELETE FROM BOARD;
 
DROP TABLE BOARD;
DROP TABLE RECOMMEND;
DROP TABLE REVIEW;
DROP TABLE MEMBER;
INSERT INTO BOARD(BOARDNUM,ID,CATEGORY,TITLE,CONTENTS,PRICE,COMPANY,PRODUCTCATEGORY,STATE )
	VALUES((SELECT NVL(MAX(BOARDNUM),0)+1 FROM BOARD),'a@a.c','리뷰','캐논DSLR판매완료','카메라가좋아요',1000,'캐논','DSLR','판매완료');
	INSERT INTO BOARD(BOARDNUM,ID,CATEGORY,TITLE,CONTENTS,PRICE,COMPANY,PRODUCTCATEGORY,STATE)
	VALUES((SELECT NVL(MAX(BOARDNUM),0)+1 FROM BOARD),'a@a.c','리뷰','캐논DSLR판매완료~','카메라가좋아요',2000,'캐논','DSLR','판매완료');
	INSERT INTO BOARD(BOARDNUM,ID,CATEGORY,TITLE,CONTENTS,PRICE,COMPANY,PRODUCTCATEGORY)
	VALUES((SELECT NVL(MAX(BOARDNUM),0)+1 FROM BOARD),'a@a.c','리뷰','캐논미러리스!!!','카메라가좋아요',3000,'캐논','미러리스');
	INSERT INTO BOARD(BOARDNUM,ID,CATEGORY,TITLE,CONTENTS,PRICE,COMPANY,PRODUCTCATEGORY)
	VALUES((SELECT NVL(MAX(BOARDNUM),0)+1 FROM BOARD),'a@a.c','리뷰','니콘미러리스~','카메라가좋아요',4000,'니콘','미러리스');
	INSERT INTO BOARD(BOARDNUM,ID,CATEGORY,TITLE,CONTENTS,PRICE,COMPANY,PRODUCTCATEGORY,STATE)
	VALUES((SELECT NVL(MAX(BOARDNUM),0)+1 FROM BOARD),'a@a.c','리뷰','니콘미러리스판매중~~~','카메라가좋아요',5000,'니콘','미러리스','판매중');
	INSERT INTO BOARD(BOARDNUM,ID,CATEGORY,TITLE,CONTENTS,PRICE,COMPANY,PRODUCTCATEGORY,STATE)
	VALUES((SELECT NVL(MAX(BOARDNUM),0)+1 FROM BOARD),'a@a.c','리뷰','니콘미러리스판매중','카메라가좋아요',6000,'니콘','미러리스','판매중');
	INSERT INTO BOARD(BOARDNUM,ID,CATEGORY,TITLE,CONTENTS,PRICE,COMPANY,PRODUCTCATEGORY,STATE)
	VALUES((SELECT NVL(MAX(BOARDNUM),0)+1 FROM BOARD),'a@a.c','리뷰','소니미러리스판매중','카메라가좋아요',7000,'소니','미러리스','판매중');
	INSERT INTO BOARD(BOARDNUM,ID,CATEGORY,TITLE,CONTENTS,PRICE,COMPANY,PRODUCTCATEGORY,STATE)
	VALUES((SELECT NVL(MAX(BOARDNUM),0)+1 FROM BOARD),'a@a.c','리뷰','소니미러리스판매중','카메라가좋아요',8000,'소니','미러리스','판매중');
	INSERT INTO BOARD(BOARDNUM,ID,CATEGORY,TITLE,CONTENTS,PRICE,COMPANY,PRODUCTCATEGORY,STATE)
	VALUES((SELECT NVL(MAX(BOARDNUM),0)+1 FROM BOARD),'a@a.c','리뷰','소니컴팩트판매중','카메라가좋아요',9000,'소니','컴팩트','판매중');
	INSERT INTO BOARD(BOARDNUM,ID,CATEGORY,TITLE,CONTENTS,PRICE,COMPANY,PRODUCTCATEGORY,STATE)
	VALUES((SELECT NVL(MAX(BOARDNUM),0)+1 FROM BOARD),'a@a.c','판매','소니미러리스판매중','카메라가좋아요',7000,'소니','미러리스','판매중');
	INSERT INTO BOARD(BOARDNUM,ID,CATEGORY,TITLE,CONTENTS,PRICE,COMPANY,PRODUCTCATEGORY,STATE)
	VALUES((SELECT NVL(MAX(BOARDNUM),0)+1 FROM BOARD),'a@a.c','판매','소니미러리스판매중','카메라가좋아요',8000,'소니','미러리스','판매중');
	INSERT INTO BOARD(BOARDNUM,ID,CATEGORY,TITLE,CONTENTS,PRICE,COMPANY,PRODUCTCATEGORY,STATE)
	VALUES((SELECT NVL(MAX(BOARDNUM),0)+1 FROM BOARD),'a@a.c','자유게시판','소니컴팩트판매중','카메라가좋아요',9000,'소니','컴팩트','판매중');
	
	
	INSERT INTO BOARD(BOARDNUM,ID,CATEGORY,TITLE,CONTENTS)
	VALUES((SELECT NVL(MAX(BOARDNUM),0)+1 FROM BOARD),'c@c.c','리뷰','CANON카메라리뷰','카메라가좋아요');
		INSERT INTO BOARD(BOARDNUM,ID,CATEGORY,TITLE,CONTENTS)
	VALUES((SELECT NVL(MAX(BOARDNUM),0)+1 FROM BOARD),'c@c.c','리뷰','PENTAX카메라리뷰','카메라가좋아요');
		INSERT INTO BOARD(BOARDNUM,ID,CATEGORY,TITLE,CONTENTS)
	VALUES((SELECT NVL(MAX(BOARDNUM),0)+1 FROM BOARD),'c@c.c','리뷰','캐논카메라리뷰','카메라가좋아요');
		INSERT INTO BOARD(BOARDNUM,ID,CATEGORY,TITLE,CONTENTS)
	VALUES((SELECT NVL(MAX(BOARDNUM),0)+1 FROM BOARD),'c@c.c','리뷰','LEICA카메라리뷰','카메라가좋아요');
		INSERT INTO BOARD(BOARDNUM,ID,CATEGORY,TITLE,CONTENTS)
	VALUES((SELECT NVL(MAX(BOARDNUM),0)+1 FROM BOARD),'c@c.c','리뷰','KONICA카메라리뷰','카메라가좋아요');
	